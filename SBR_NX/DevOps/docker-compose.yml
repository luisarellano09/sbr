version: "3.8"

services:
    sbr_portainer:
        restart: unless-stopped
        image: portainer/portainer-ce
        container_name: sbr_portainer
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /var/run/docker.sock:/var/run/docker.sock:ro
            - ~SBR/data/portainer/portainer-data:/data
        ports:
            - 9000:9000
        networks:
            - sbr_net_external


    sbr_serv_host_connector:
        restart: unless-stopped
        image: sbr/sbr_serv_host_connector:1.0
        container_name: sbr_serv_host_connector
        volumes:
            - ~SBR/data/host_connector/requests:/app
        environment:
            RABBITMQ_HOST: "sbrpi.local"
            HOST: "NX"
        build:
            context: ../../SBR_SERV/host_connector/
            target: dev
        networks:
            sbr_net_external_ethernet:
                ipv4_address: 172.168.10.11


networks:
    sbr_net_internal:
        driver: bridge
        internal: true

    sbr_net_external:
        driver: bridge

    sbr_net_external_ethernet:
        driver: ipvlan
        driver_opts:
            parent: eth0

